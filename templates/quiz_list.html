{% extends "base.html" %}

{% block title %}Список Квизов{% endblock %}

{% block content %}
    <div class="container mt-4"> {# Используем Bootstrap-контейнер для центрирования и отступов #}
        <div class="panel">
            <div class="panel-header text-center">
                <div class="panel-title h5 mt-10">Доступные Квизы</div>
            </div>
            <div class="panel-body">
                {% if quizzes %}
                    <div class="row"> {# Используем Bootstrap-сетку для адаптивности #}
                        {% for quiz in quizzes %}
                            <div class="col-md-6 col-lg-4 mb-4"> {# Каждая карточка будет занимать 1/2 ширины на средних экранах и 1/3 на больших #}
                                <div class="card h-100"> {# h-100 чтобы карточки были одной высоты в ряду #}
                                    <div class="card-header">
                                        <h5 class="card-title">{{ quiz.title }}</h5>
                                    </div>
                                    <div class="card-body">
                                        <p class="card-text">{{ quiz.description }}</p>

                                        {% set stat = user_quiz_stats.get(quiz.id) %}
                                        {% if stat %}
                                            <div class="quiz-stats-summary">
                                                <p>Ваша статистика: <strong>{{ stat.total_correct }}</strong> из <strong>{{ stat.total_questions }}</strong> (<strong>{{ "%.0f"|format(stat.total_correct / stat.total_questions * 100) if stat.total_questions > 0 else 0 }}%</strong>)</p>
                                                <small class="text-muted">Сыграно раз: {{ stat.games_played }}</small>
                                            </div>
                                        {% else %}
                                            <div class="quiz-stats-summary text-muted">
                                                <p>Вы пока не проходили этот квиз.</p>
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="card-footer text-right">
                                        <a href="{{ url_for('start_quiz', quiz_id=quiz.id) }}" class="btn btn-primary">Начать Квиз</a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div> {# Конец row #}
                {% else %}
                    <p class="text-center">Пока нет доступных квизов. Пожалуйста, добавьте их в базу данных.</p>
                {% endif %}
            </div>
        </div>
    </div> {# Конец container #}
{% endblock %}